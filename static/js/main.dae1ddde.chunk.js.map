{"version":3,"sources":["Board/theme.ts","Board/Grid.jsx","Board/svg.ts","Board/index.tsx","engine/ui.ts","engine/engine.ts","engine/index.ts","zip/index.ts","tutorial.tsx","ui.tsx","index.tsx","code.ts"],"names":["colors","HIGHLIGHT_DIM","DEAD_OPACITY","CELL_SIZE","CELL_SPACING","toGridSpace","slot","getPartWidth","part","extraWidth","direction","getPartHeight","extraHeight","getPartXOffset","xBias","x","getPartYOffset","yBias","y","getOpacity","snake","highlightedSnake","_id","isDead","range","size","result","i","push","Grid","snakeIndex","partIndex","type","this","renderHeadPart","renderTailPart","renderMiddlePart","highlighted","getHeadXOffset","getHeadYOffset","box","headSvg","viewBox","baseVal","transform","halfX","width","halfY","height","concat","getHeadTransform","viewBoxStr","react_default","a","createElement","key","fill","color","opacity","shapeRendering","dangerouslySetInnerHTML","__html","innerHTML","shouldRender","getTailXOffset","getTailYOffset","tailSvg","getTailTransform","_this","unsortedSnakes","props","snakes","food","sortedSnakes","sort","b","viewBoxWidth","columns","viewBoxHeight","rows","maxWidth","maxHeight","map","_","row","col","body","renderPart","f","foodIndex","cx","cy","r","renderGrid","React","Component","makeDom","svgText","wrapper","document","trim","firstChild","styles","Board","style","display","margin","Board_Grid","toUIFrame","move","turn","game","board","you","id","name","health","death","idx","partIdx","next","Object","objectSpread","getDirection","headDirection","isCovered","getType","formatBody","length","initialFrame","run","_x","_x2","_x3","_run","apply","arguments","_callee","code","canceller","emit","start","frame","foodIdx","regenerator_default","wrap","_context","prev","obj","JSON","parse","stringify","cancelled","abrupt","toMoveAPI","moveTransform","ateFood","splice","unshift","sleep","stop","head","findIndex","MoveError","_Error","message","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","inherits","wrapNativeSuper","Error","offBoard","assign","forEach","ms","undefined","Promise","setTimeout","engineInitialFrame","lambda","js","file","Zip","generateAsync","then","val","saveAs","heroku","title","targets","Title","_ref","className","disabled","onClick","Body","react_markdown_default","source","src","children","tutorials","Fragment","target","Logo","react","xmlns","d","basicSnake","placeholder","App","fn","initial","localStorage","getItem","editor","state","tutorial","parseInt","engine","componentDidMount","handleStart","handleInit","onDidChangeModelContent","handleCodeChange","getValue","handleSetTutorial","change","setState","setItem","toString","handleNext","handlePrev","handleReset","running","handleStop","asyncToGenerator","mark","Function","assertThisInitialized","error","t0","console","log","_this2","_this$state","Tutorial","href","ui_Logo","lib_default","value","editorDidMount","ref","language","theme","options","minimap","enabled","scrollbar","vertical","verticalScrollbarSize","src_Board","ReactDOM","render","src_App","getElementById"],"mappings":"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","file":"static/js/main.dae1ddde.chunk.js","sourcesContent":["export const colors = {\n  pageBackground: \"#202124\",\n  gridBackground: \"#202124\",\n  cellBackground: \"#393e42\",\n  healthBarDeathBackground: \"#333\",\n  food: \"#ff5a72\",\n  healthBar: \"#0f0\",\n  healthBarOutline: \"#555\",\n  lightText: \"#fff\",\n  darkText: \"#000\",\n\n  // colour names\n  white: \"#fff\",\n};\n","import React from \"react\";\nimport { colors } from \"./theme\";\n\nconst HIGHLIGHT_DIM = 0.25;\nconst DEAD_OPACITY = 0.15;\nconst CELL_SIZE = 20;\nconst CELL_SPACING = 4;\n\nfunction toGridSpace(slot) {\n  return (CELL_SIZE + CELL_SPACING) * slot + CELL_SPACING;\n}\n\nfunction getPartWidth(part) {\n  const extraWidth =\n    part.direction === \"left\" || part.direction === \"right\" ? CELL_SPACING : 0;\n  return CELL_SIZE + extraWidth + \"px\";\n}\n\nfunction getPartHeight(part) {\n  const extraHeight =\n    part.direction === \"up\" || part.direction === \"down\" ? CELL_SPACING : 0;\n  return CELL_SIZE + extraHeight + \"px\";\n}\n\nfunction getPartXOffset(part) {\n  const xBias = part.direction === \"left\" ? -CELL_SPACING : 0;\n  return toGridSpace(part.x) + xBias;\n}\n\nfunction getPartYOffset(part) {\n  const yBias = part.direction === \"up\" ? -CELL_SPACING : 0;\n  return toGridSpace(part.y) + yBias;\n}\n\nfunction getTailXOffset(part) {\n  switch (part.direction) {\n    case \"left\":\n      return toGridSpace(part.x) - CELL_SPACING;\n    case \"right\":\n      return toGridSpace(part.x) + CELL_SPACING;\n    default:\n      return toGridSpace(part.x);\n  }\n}\n\nfunction getTailYOffset(part) {\n  switch (part.direction) {\n    case \"up\":\n      return toGridSpace(part.y) - CELL_SPACING;\n    case \"down\":\n      return toGridSpace(part.y) + CELL_SPACING;\n    default:\n      return toGridSpace(part.y);\n  }\n}\n\nfunction getHeadXOffset(part) {\n  switch (part.direction) {\n    case \"left\":\n      return toGridSpace(part.x);\n    case \"right\":\n      return toGridSpace(part.x);\n    default:\n      return toGridSpace(part.x);\n  }\n}\n\nfunction getHeadYOffset(part) {\n  switch (part.direction) {\n    case \"up\":\n      return toGridSpace(part.y);\n    case \"down\":\n      return toGridSpace(part.y);\n    default:\n      return toGridSpace(part.y);\n  }\n}\n\nfunction getOpacity(snake, highlightedSnake) {\n  if (highlightedSnake) {\n    return snake._id === highlightedSnake ? 1 : HIGHLIGHT_DIM;\n  }\n\n  return snake.isDead ? DEAD_OPACITY : 1;\n}\n\nfunction range(size) {\n  const result = [];\n  for (let i = 0; i < size; i++) {\n    result.push(i);\n  }\n  return result;\n}\n\nfunction sortAliveSnakesOnTop(snakes) {\n  return snakes.concat().sort((a, b) => {\n    const aOrder = a.isDead ? 0 : 1;\n    const bOrder = b.isDead ? 0 : 1;\n    return aOrder - bOrder;\n  });\n}\n\nfunction getHeadTransform(direction, viewBox) {\n  const halfX = viewBox.width / 2;\n  const halfY = viewBox.height / 2;\n  switch (direction) {\n    case \"left\":\n      return `rotate(180 ${halfX} ${halfY})`;\n    case \"up\":\n      return `rotate(-90 ${halfX} ${halfY})`;\n    case \"down\":\n      return `rotate(90 ${halfX} ${halfY})`;\n    default:\n      return \"\";\n  }\n}\n\nfunction getTailTransform(direction, viewBox) {\n  const halfX = viewBox.width / 2;\n  const halfY = viewBox.height / 2;\n  switch (direction) {\n    case \"right\":\n      return `rotate(180 ${halfX} ${halfY})`;\n    case \"down\":\n      return `rotate(-90 ${halfX} ${halfY})`;\n    case \"up\":\n      return `rotate(90 ${halfX} ${halfY})`;\n    default:\n      return \"\";\n  }\n}\n\nclass Grid extends React.Component {\n  renderPart(snake, snakeIndex, part, partIndex, highlightedSnake) {\n    switch (part.type) {\n      case \"head\":\n        return this.renderHeadPart(snake, snakeIndex, part, highlightedSnake);\n      case \"tail\":\n        return this.renderTailPart(snake, snakeIndex, part, highlightedSnake);\n      default:\n        return this.renderMiddlePart(\n          snake,\n          snakeIndex,\n          part,\n          partIndex,\n          highlightedSnake\n        );\n    }\n  }\n\n  renderHeadPart(snake, snakeIndex, part, highlighted) {\n    const x = getHeadXOffset(part);\n    const y = getHeadYOffset(part);\n    const box = snake.headSvg.viewBox.baseVal;\n    const transform = getHeadTransform(part.direction, box);\n    const viewBoxStr = `${box.x} ${box.y} ${box.width} ${box.height}`;\n\n    return (\n      <svg\n        key={\"part\" + snakeIndex + \",head\"}\n        fill={snake.color}\n        width={CELL_SIZE + \"px\"}\n        height={CELL_SIZE + \"px\"}\n        x={x}\n        y={y}\n        viewBox={viewBoxStr}\n        opacity={getOpacity(snake, highlighted)}\n        shapeRendering=\"optimizeSpeed\"\n      >\n        <g\n          transform={transform}\n          dangerouslySetInnerHTML={{ __html: snake.headSvg.innerHTML }}\n        />\n      </svg>\n    );\n  }\n\n  renderMiddlePart(snake, snakeIndex, part, partIndex, highlighted) {\n    if (!part.shouldRender) {\n      return (\n        <svg\n          key={\"part\" + snakeIndex + \",\" + partIndex}\n          shapeRendering=\"optimizeSpeed\"\n        />\n      );\n    }\n\n    return (\n      <rect\n        key={`part${snakeIndex},${part.x},${part.y}`}\n        x={getPartXOffset(part)}\n        y={getPartYOffset(part)}\n        width={getPartWidth(part)}\n        height={getPartHeight(part)}\n        opacity={getOpacity(snake, highlighted)}\n        fill={snake.color}\n        shapeRendering=\"optimizeSpeed\"\n      />\n    );\n  }\n\n  renderTailPart(snake, snakeIndex, part, highlighted) {\n    const x = getTailXOffset(part);\n    const y = getTailYOffset(part);\n    const box = snake.tailSvg.viewBox.baseVal;\n    const transform = getTailTransform(part.direction, box);\n    const viewBoxStr = `${box.x} ${box.y} ${box.width} ${box.height}`;\n\n    if (!part.shouldRender) {\n      return (\n        <svg\n          key={\"part\" + snakeIndex + \",tail\"}\n          shapeRendering=\"optimizeSpeed\"\n        />\n      );\n    }\n\n    return (\n      <svg\n        key={\"part\" + snakeIndex + \",tail\"}\n        fill={snake.color}\n        width={CELL_SIZE}\n        height={CELL_SIZE}\n        x={x}\n        y={y}\n        viewBox={viewBoxStr}\n        opacity={getOpacity(snake, highlighted)}\n        shapeRendering=\"optimizeSpeed\"\n      >\n        <g\n          transform={transform}\n          dangerouslySetInnerHTML={{ __html: snake.tailSvg.innerHTML }}\n        />\n      </svg>\n    );\n  }\n\n  renderGrid() {\n    const unsortedSnakes = this.props.snakes || [];\n    const food = this.props.food || [];\n\n    // Make alive snakes render on top of dead snakes\n    const sortedSnakes = sortAliveSnakesOnTop(unsortedSnakes);\n\n    const viewBoxWidth = toGridSpace(this.props.columns);\n    const viewBoxHeight = toGridSpace(this.props.rows);\n\n    return (\n      <svg\n        width={this.props.maxWidth}\n        height={this.props.maxHeight}\n        x={this.props.x}\n        y={this.props.y}\n        viewBox={`0 0 ${viewBoxWidth} ${viewBoxHeight}`}\n      >\n        <rect\n          width={viewBoxWidth}\n          height={viewBoxHeight}\n          fill={colors.gridBackground}\n          opacity={this.props.highlightedSnake ? HIGHLIGHT_DIM : null}\n          shapeRendering=\"optimizeSpeed\"\n        />\n\n        {range(this.props.rows).map((_, row) =>\n          range(this.props.columns).map((_, col) => (\n            <rect\n              key={\"cell\" + row + \",\" + col}\n              x={toGridSpace(col)}\n              y={toGridSpace(row)}\n              width={CELL_SIZE}\n              height={CELL_SIZE}\n              fill={colors.cellBackground}\n              opacity={this.props.highlightedSnake ? HIGHLIGHT_DIM : null}\n              shapeRendering=\"optimizeSpeed\"\n            />\n          ))\n        )}\n\n        {sortedSnakes.map((snake, snakeIndex) => {\n          return snake.body.map((part, partIndex) =>\n            this.renderPart(\n              snake,\n              snakeIndex,\n              part,\n              partIndex,\n              this.props.highlightedSnake\n            )\n          );\n        })}\n\n        {food.map((f, foodIndex) => (\n          <circle\n            key={\"food\" + foodIndex}\n            cx={toGridSpace(f.x) + CELL_SIZE / 2}\n            cy={toGridSpace(f.y) + CELL_SIZE / 2}\n            r={CELL_SIZE / 2}\n            fill={colors.food}\n            opacity={this.props.highlightedSnake ? HIGHLIGHT_DIM : null}\n            shapeRendering=\"optimizeQuality\"\n          />\n        ))}\n      </svg>\n    );\n  }\n\n  render() {\n    if (this.props.snakes) {\n      return this.renderGrid();\n    } else {\n      return;\n    }\n  }\n}\n\nexport default Grid;\n","const head = `\n<svg id=\"root\" viewBox=\"0 0 100 100\" xmlns=\"http://www.w3.org/2000/svg\">\n    <circle fill=\"none\" cx=\"12.52\" cy=\"28.55\" r=\"9.26\"/>\n    <path d=\"M0 100h100L56 55.39l44-39.89V.11L0 0zm12.52-80.71a9.26 9.26 0 1 1-9.26 9.26 9.26 9.26 0 0 1 9.26-9.26z\"/>\n</svg>\n`;\n\nconst tail = `\n<svg id=\"root\" viewBox=\"0 0 100 100\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M50 0H0v100h50l50-50L50 0z\"/>\n</svg>\n`;\n\nexport const headSvg = makeDom(head);\nexport const tailSvg = makeDom(tail);\n\nfunction makeDom(svgText: string) {\n  const wrapper = document.createElement(\"div\");\n  wrapper.innerHTML = svgText.trim();\n  return wrapper.firstChild;\n}\n","import React from \"react\";\nimport Grid from \"./Grid\";\nimport { colors } from \"./theme\";\nimport { Snake, Food } from \"../engine\";\nimport { headSvg, tailSvg } from \"./svg\";\n\nconst styles = {\n  width: \"100%\",\n  height: \"85%\",\n};\n\ninterface BoardProps {\n  food: Food[];\n  columns: number;\n  rows: number;\n  snakes: Snake[];\n}\n\nclass Board extends React.Component<BoardProps> {\n  render() {\n    const snakes = this.props.snakes.map((snake: any) => {\n      snake.headSvg = headSvg;\n      snake.tailSvg = tailSvg;\n      return snake;\n    });\n    return (\n      <svg\n        style={{ display: \"block\", margin: \"auto\" }}\n        viewBox=\"0 0 90 90\"\n        height={styles.height}\n        width={styles.width}\n      >\n        <rect x=\"0\" y=\"0\" width=\"90\" height=\"90\" fill={colors.pageBackground} />\n\n        <Grid\n          snakes={snakes}\n          food={this.props.food}\n          columns={this.props.columns}\n          rows={this.props.rows}\n          maxWidth={90}\n          maxHeight={90}\n          x={0}\n          y={0}\n        />\n      </svg>\n    );\n  }\n}\n\nexport default Board;\n","import { MoveAPI, Snake as SnakeAPI, Point } from \"./types\";\n\nexport interface UISnakePoint {\n  x: number;\n  y: number;\n  type: string;\n  shouldRender: boolean;\n  direction: string;\n}\n\nexport interface UISnake {\n  _id: string;\n  color: string;\n  body: UISnakePoint[];\n  name: string;\n  health: number;\n  isDead: boolean;\n  death?: { cause: string; turn: number };\n}\n\nexport interface UIFrame {\n  turn: number;\n  game: {\n    width: number;\n    height: number;\n  };\n  snake: UISnake;\n  food: Point[];\n}\n\nexport function toUIFrame(move: MoveAPI): UIFrame {\n  return {\n    turn: move.turn,\n    game: {\n      width: move.board.width,\n      height: move.board.height,\n    },\n    snake: {\n      _id: move.you.id,\n      color: move.you.color,\n      name: move.you.name,\n      health: move.you.health,\n      isDead: !!move.you.death,\n      death: move.you.death,\n      body: move.you.body.map((_, idx) => formatBody(move.you, idx)),\n    },\n    food: move.board.food,\n  };\n}\n\nfunction formatBody(snake: SnakeAPI, partIdx: number): UISnakePoint {\n  const part = snake.body[partIdx];\n  const next = snake.body[partIdx - 1];\n  return {\n    ...part,\n    direction: next ? getDirection(part, next) : headDirection(snake),\n    shouldRender: !isCovered(snake, partIdx),\n    type: getType(snake, partIdx),\n  };\n}\n\nfunction getDirection(a: Point, b: Point) {\n  if (a.x < b.x) {\n    return \"right\";\n  } else if (b.x < a.x) {\n    return \"left\";\n  } else if (a.y < b.y) {\n    return \"down\";\n  }\n  return \"up\";\n}\n\nfunction headDirection(snake: SnakeAPI) {\n  return snake.body.length > 1\n    ? getDirection(snake.body[1], snake.body[0])\n    : \"up\";\n}\n\nfunction isCovered(snake: SnakeAPI, partIndex: number) {\n  const part = snake.body[partIndex];\n  const next = snake.body[partIndex - 1];\n\n  return next && next.x === part.x && next.y === part.y;\n}\n\nfunction getType(snake: SnakeAPI, partIndex: number) {\n  if (partIndex === 0) {\n    return \"head\";\n  }\n\n  if (partIndex === snake.body.length - 1) {\n    return \"tail\";\n  }\n\n  return \"body\";\n}\n","import { Point, Snake, MoveAPI } from \"./types\";\nimport { Code } from \"../code\";\nimport { toUIFrame, UIFrame } from \"./ui\";\n\nexport interface Frame {\n  width: number;\n  height: number;\n  turn: number;\n  snake: Snake;\n  food: Point[];\n}\n\nexport const initialFrame: Frame = {\n  turn: 1,\n  width: 10,\n  height: 10,\n  food: [\n    {\n      x: 3,\n      y: 2,\n    },\n    {\n      x: 1,\n      y: 7,\n    },\n    {\n      x: 7,\n      y: 8,\n    },\n    {\n      x: 8,\n      y: 1,\n    },\n  ],\n  snake: {\n    id: \"test\",\n    name: \"test\",\n    health: 25,\n    color: \"grey\",\n    body: [\n      {\n        x: 5,\n        y: 5,\n      },\n      {\n        x: 5,\n        y: 6,\n      },\n    ],\n  },\n};\n\ninterface Canceller {\n  cancelled(): boolean;\n}\n\nexport async function run(\n  code: Code,\n  canceller: Canceller,\n  emit: (frame: UIFrame) => void\n) {\n  const start: Frame = deepCopy(initialFrame);\n  start.snake.color = code.start({}).color;\n\n  let turn = 1;\n  let frame = start;\n  while (true) {\n    if (canceller.cancelled()) {\n      return;\n    }\n\n    frame = { ...frame, turn };\n    const move = code.move(toMoveAPI(frame)).move;\n    const next = moveTransform(frame, move);\n    const foodIdx = ateFood(next, frame.food);\n\n    if (foodIdx != -1) {\n      // Add food to the array and leave the body intact.\n      frame.food.splice(foodIdx, 1);\n    } else {\n      // Remove the last item from the body.\n      frame.snake.body.splice(frame.snake.body.length - 1, 1);\n    }\n    frame.snake.body.unshift(next);\n\n    emit(toUIFrame(toMoveAPI(frame)));\n\n    await sleep(400);\n    turn++;\n  }\n}\n\nfunction ateFood(head: Point, food: Point[]) {\n  return food.findIndex((f) => f.x === head.x && f.y === head.y);\n}\n\nexport class MoveError extends Error {\n  turn: number;\n\n  constructor(message: string, turn: number) {\n    super(message);\n    this.turn = turn;\n  }\n}\n\n/**\n * Move transform takes the current snake and move and writes out a new head.\n * it will copy the current head as a base. It will throw an error if the move\n * is off the board.\n */\nfunction moveTransform(frame: Frame, move: string): Point {\n  const { snake, turn, height, width } = frame;\n\n  const offBoard = () => {\n    throw new MoveError(`Snake moved off the board!`, turn);\n  };\n\n  const head = Object.assign({}, snake.body[0]);\n  switch (move) {\n    case \"up\":\n      head.y -= 1;\n      if (head.y < 0) offBoard();\n      break;\n    case \"down\":\n      head.y += 1;\n      if (head.y >= height) offBoard();\n      break;\n    case \"left\":\n      head.x -= 1;\n      if (head.x < 0) offBoard();\n      break;\n    case \"right\":\n      head.x += 1;\n      if (head.x >= width) offBoard();\n      break;\n    default:\n      throw new MoveError(`Unkown move \"${move}\"`, turn);\n  }\n\n  snake.body.forEach((part) => {\n    if (part.x === head.x && part.y === head.y)\n      throw new MoveError(`Snake moved into itself!`, turn);\n  });\n\n  return head;\n}\n\nfunction sleep(ms = 0) {\n  return new Promise((r) => setTimeout(r, ms));\n}\n\nexport function toMoveAPI(frame: Frame): MoveAPI {\n  return {\n    game: {\n      id: \"test\",\n    },\n    turn: frame.turn,\n    board: {\n      height: frame.height,\n      width: frame.width,\n      food: frame.food,\n      snakes: [frame.snake],\n    },\n    you: frame.snake,\n  };\n}\n\nfunction deepCopy(obj: any) {\n  return JSON.parse(JSON.stringify(obj));\n}\n","import { UIFrame, UISnake, toUIFrame } from \"./ui\";\nimport { Point } from \"./types\";\nimport { toMoveAPI, initialFrame as engineInitialFrame } from \"./engine\";\n\nexport type Frame = UIFrame;\nexport type Snake = UISnake;\nexport type Food = Point;\n\nexport { run } from \"./engine\";\nexport const initialFrame = toUIFrame(toMoveAPI(engineInitialFrame));\n","import Zip from \"jszip\";\nimport raw from \"raw.macro\";\nimport { saveAs } from \"file-saver\";\n\nfunction lambda(js: string) {\n  const file = new Zip();\n  file.file(\"README.md\", raw(\"./lambda/README.md\"));\n  file.file(\"template.yml\", raw(\"./lambda/template.yml\"));\n  file.file(\"samconfig.toml\", raw(\"./lambda/samconfig.toml\"));\n  file.file(\"index.js\", js + \"\\n\" + raw(\"./lambda/index.js\"));\n\n  file.generateAsync({ type: \"blob\" }).then((val) => {\n    saveAs(val, \"lambda.zip\");\n  });\n}\n\nlambda.title = \"AWS Lambda\";\n\nfunction heroku(js: string) {\n  const file = new Zip();\n  file.file(\"README.md\", raw(\"./heroku/README.md\"));\n  file.file(\"package.json\", raw(\"./heroku/package.json\"));\n  file.file(\"index.js\", js + \"\\n\" + raw(\"./heroku/index.js\"));\n\n  file.generateAsync({ type: \"blob\" }).then((val) => {\n    saveAs(val, \"heroku.zip\");\n  });\n}\n\nheroku.title = \"Heroku\";\n\nexport const targets = [lambda, heroku];\n","import React, { useState } from \"react\";\nimport Markdown from \"react-markdown\";\nimport raw from \"raw.macro\";\nimport { targets } from \"./zip\";\n\nexport interface Props {\n  code: string;\n  next?: () => void;\n  prev?: () => void;\n}\n\nfunction Title({ next, prev, title }: Props & { title: string }) {\n  return (\n    <header className=\"border-bottom d-flex p-3\">\n      <div className=\"flex-auto f2-light border-none\">{title}</div>\n      <div className=\"BtnGroup\">\n        <button\n          disabled={!prev}\n          className=\"btn btn-outline BtnGroup-item\"\n          onClick={prev}\n        >\n          &lt; Back\n        </button>\n        <button\n          className=\"btn btn-outline BtnGroup-item\"\n          disabled={!next}\n          onClick={next}\n        >\n          Next &gt;\n        </button>\n      </div>\n    </header>\n  );\n}\n\nfunction Body(props: { src: string; children?: any }) {\n  return (\n    <div className=\"markdown-body overflow-scroll p-3 flex-auto height-page2\">\n      <Markdown source={props.src} />\n      {props.children}\n    </div>\n  );\n}\n\nexport const Landing = (props: Props) => (\n  <>\n    <Title {...props} title=\"Welcome to Battlesnake!\" />\n    <Body src={raw(\"./tutorials/landing.md\")} />\n  </>\n);\n\nexport const MoveCommand = (props: Props) => (\n  <>\n    <Title {...props} title=\"Moving your Snake\" />\n    <Body src={raw(\"./tutorials/move-command.md\")} />\n  </>\n);\n\nexport const AvoidWalls = (props: Props) => (\n  <>\n    <Title {...props} title=\"Avoiding Walls\" />\n    <Body src={raw(\"./tutorials/avoiding-walls.md\")} />\n  </>\n);\n\nexport const AvoidSelf = (props: Props) => (\n  <>\n    <Title {...props} title=\"Avoiding Yourself\" />\n    <Body src={raw(\"./tutorials/avoiding-self.md\")} />\n  </>\n);\n\nexport const Introduction = (props: Props) => (\n  <>\n    <Title {...props} title=\"Battlesnake Basics\" />\n    <Body src={raw(\"./tutorials/introduction.md\")} />\n  </>\n);\n\nexport const Download = (props: Props) => (\n  <>\n    <Title {...props} title=\"Download your Snake!\" />\n    <Body src={raw(\"./tutorials/deployment.md\")}>\n      <div className=\"BtnGroup d-flex flex-justify-center p-3\">\n        {targets.map((target) => (\n          <button\n            key={target.name}\n            className=\"btn BtnGroup-item\"\n            onClick={() => target(props.code)}\n          >\n            {target.title}\n          </button>\n        ))}\n      </div>\n    </Body>\n  </>\n);\n\nexport const tutorials = [\n  Landing,\n  Introduction,\n  MoveCommand,\n  AvoidWalls,\n  AvoidSelf,\n  Download,\n];\n","import * as React from \"react\";\n\nexport const Logo = () => (\n  <svg\n    height=\"50px\"\n    style={{ color: \"white\" }}\n    fill=\"currentColor\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 503 184\"\n  >\n    <path d=\"M305.5 102.7h-36.1v-71H253v71h-36.2v-71h-27L178.2.7h146.5l-.7 31h-18.5zm-33-3h30v-71H321l.6-25h-139l9.3 25h28v71h30v-71h22.6zm226 84.5l-133.3-72.5 34.2-34.8L365.9.3l134-.1V13l-22 15.5L502.5 50h-60.8L459 87.3 439.6 107zm-128.2-73.3l117 63.7-51.8-67.8 19.8-20.1-18.5-39.8h57.4l-21.3-18.7 24-16.8V3.2l-126.3.2L403 77.6zm87-87a7.3 7.3 0 1 1 7.3-7.2 7.3 7.3 0 0 1-7.3 7.2zm0-11.5a4.2 4.2 0 1 0 4.2 4.3 4.2 4.2 0 0 0-4.2-4.3z\"></path>\n    <path d=\"M134.8 104l-27.2-27.6 32-76.4h34.8l43 102.7h-39.3l-5.3-13.3h-32.5zm45.4-4.4h32.5L172.3 3.1h-30.7l-30.4 72.6 22.4 22.7 4.6-12H175zM167.9 66h-22.5l11.3-30zm-18-3h13.6l-6.8-18.2zm219.6 39.7h-42.3V30.3l.7-29.6h35.3V66h28l4.7 10.7zm-39.3-3h38l24-23.8-3-6.9h-29V3.8h-29.4l-.6 26.6z\"></path>\n    <path d=\"M3.9 184.2L62.8 107 43.4 87.3 60.7 50H0l24.7-21.5L2.4 13V.2l59.3.1h74.7L103 77l34.2 34.8-1.8 1zm43.2-97.5l19.7 20-51.6 68 117-63.7-32.8-33.3.4-1 32-73.3H5.5v8l24 16.9L8.2 46.9h57.5zm-2-62.8a7.3 7.3 0 1 1 7.2-7.3 7.3 7.3 0 0 1-7.3 7.3zm0-11.5a4.2 4.2 0 1 0 4.1 4.2 4.2 4.2 0 0 0-4.2-4.2zM210.7 118a.2.2 0 0 1-.2 0v-.1a.2.2 0 0 1 .2.2zm4.6-45.5a49.2 49.2 0 0 0 3.5 7.6l1.4 2.6-3.3-9.7a1.1 1.1 0 0 0-1.6-.6z\"></path>\n    <path d=\"M223.2 94.4a1 1 0 0 0-1.2-.3l-.4-.7c-2.9-3.3-5.7-6.8-8.8-10a1 1 0 0 0-.5.8l-.5 3a2 2 0 0 0 0 .3l-1.7 11a1.1 1.1 0 0 0 .6 1.1 5.5 5.5 0 0 1-.7 1.8l.3 5v3.4a1.2 1.2 0 0 0 0 .4v.5a.7.7 0 0 0-.1.1 1.2 1.2 0 0 0 0 .4c0 .1-.1 0 0 .1v.6c0 .2 0 0 0 0a2 2 0 0 1 0 .6v1.3s-.1 0 0 0a1 1 0 0 1 0 .2v.2a.4.4 0 0 0 0 .3s-.2.1 0 .2-.1 0 0 0l-.2 1.3v1.2h.1c.1 0 0 0 0 .2a.5.5 0 0 1 0 .2.5.5 0 0 1 .2.1v.3c0 .1 0 0 0 0h.4c.2 0 0 0 0 0h.1v1a30 30 0 0 1-1.4 7.2l-.5 1.1a148.2 148.2 0 0 0-6.2-17.1l-.4-2.2c.1-.2.3-.2.5-.2a2.7 2.7 0 0 1-.4-.9 3 3 0 0 1 0-.5 1 1 0 0 0-.1-.4 2.6 2.6 0 0 0-.4-.4v-.3a.2.2 0 0 1 .2 0c.2 0 .3-.1.3-.5a12.4 12.4 0 0 0-.9-2c-.6-4.5-1.2-9-1.6-13.5a1.1 1.1 0 0 0-1.2-1l-.2-.7a1.1 1.1 0 0 0-.4-.5l-.5.4a96 96 0 0 1-11.6 12.7l-2.1 3.4a1.2 1.2 0 0 0-.1.1 1.9 1.9 0 0 1 1.3 1.4 1.1 1.1 0 0 0 .6-.5l.6-.7q-1.1 6-2.4 11.8l-2 9a45.2 45.2 0 0 0-1.5 8.7.4.4 0 0 0 .4.4 391 391 0 0 1-1 4.7.9.9 0 0 0-.4 1 11 11 0 0 0 1.9 3.8l1.4 2.5 2.2 3.4a20.3 20.3 0 0 0 2.4 2.9 7.1 7.1 0 0 0 1 .8 65.3 65.3 0 0 1 3.2 6.1 1.1 1.1 0 0 0 2-.2l4.2-23.4.3.6a.9.9 0 0 1 1.5-.2v-1.4a.8.8 0 0 1 1.7 0v.7a.7.7 0 0 1 .6.4 35 35 0 0 0 3.4 5.2.8.8 0 0 1 1.3.2c.8 1.6 1.9 3 2.7 4.6a.8.8 0 0 1-.1 1 24 24 0 0 1 3.2 3l2.3 1.9a1.3 1.3 0 0 0 1.2.2c1 1.3 1.8 2.6 2.7 4a1.1 1.1 0 0 0 2-.6c.8-6.2 1.7-12.6 1.9-18.9a7.3 7.3 0 0 1 .8-1.3c0-1.3 0-2.8.2-4.5l.5-4.5 1.6-13.3c.5-3.4 1-6.9 1.3-10.4.2-3.1-1.6-5.2-3.5-7.7zM191.7 155l-.8-1.6a1 1 0 0 0 .2-.1 1.5 1.5 0 0 1 1-.4zm.5-2.5a.4.4 0 0 0-.2-.2c-.1 0-.1-.2 0-.4h.3l-.1.5zm4.9-59v-.8l.1-.6.4 1.5a1.2 1.2 0 0 0-.5 0zm1.4 6l-.3-1v-.3c0-.1 0 0 0 0a1 1 0 0 0 .3.6l.2 1zm5.7 19.8l-.9-4.3a403.2 403.2 0 0 1 1.5 4.5.6.6 0 0 0-.6-.2zm1.2 4.4v.8l-.5-2v-1a13.3 13.3 0 0 1 .8 1.7.5.5 0 0 0-.3.5zm1.2 4.4l-.2-.2a.7.7 0 0 0 .2-.3zm-.2-2.5a14 14 0 0 1 .2 1.6 11.9 11.9 0 0 1-.2-1.5zm.3 5l-.3-1.4a3.9 3.9 0 0 0 .5.2.5.5 0 0 0 .7-.4 12 12 0 0 0 0-1.6l.4 1.4a13.1 13.1 0 0 1-1.3 1.8zm4-16.5a6.3 6.3 0 0 0 0 1.3 3 3 0 0 0 0 .7v1.1c0 .2 0 0 0 0v.1a.1.1 0 0 1 0-.1 2.3 2.3 0 0 1 0-.8v-2.1s.1 0 0 0v-.8a.2.2 0 0 0 0-.2v-.4c0-.1.1 0 0-.1v-.1a2 2 0 0 0 0-.2V109.2l.1 1.8.2 3.3h-.3zm7.9 36.6v-1.5a1.4 1.4 0 0 0 .2-.2zm2.8-53.6a.7.7 0 0 0 0-.2V96.6a1.5 1.5 0 0 0 0-.2v-.1c0-.1-.1 0 0-.1v1zm2.8 7.4l-.7 5.4v-4.6a.4.4 0 0 0 0-.1 6.3 6.3 0 0 0 0-2.4 6 6 0 0 1 .4-1.7l-.5-1v-2l.7 1.2c.8 1.5.3 3.5.1 5.2zm166.2-37.2a1 1 0 0 0-1-.7 1 1 0 0 0-.7 1.9 4 4 0 0 1-.4.2 1.1 1.1 0 0 0-.7-.3h-.3a.6.6 0 0 0-.8-.5h-.2a.6.6 0 0 0-.5-.3c-3.3.4-6.4 1.9-9.4 3.2l-2 .8a.7.7 0 0 0-1-.4 8 8 0 0 0-1.1.7.6.6 0 0 0-.6-.1 175 175 0 0 0-14 6.2l-1.5.4-4.9 1.5a23.2 23.2 0 0 0-5 1.7.8.8 0 0 0 0 1.5 107.2 107.2 0 0 1-11 4.1 1 1 0 0 0 .5 1.9l-.6.5a6.8 6.8 0 0 0-1.5 2.5l.4 1a1 1 0 0 0 0 .3c-.3 8.4 0 17 .3 25.4l-.8.2a55.5 55.5 0 0 1-9.1 1.6 52.4 52.4 0 0 1-5.5.2 1.1 1.1 0 0 0-.7-.6l-.5-.2-3.6-2.7a36.7 36.7 0 0 1-3.5-4.5v-.2a11.1 11.1 0 0 1 1-1.2l.8-1.1a4 4 0 0 0 .7-1.3 28.7 28.7 0 0 1 2.6-3.3 130.6 130.6 0 0 0 9.5-11 27 27 0 0 0 2.2-3.2 11.6 11.6 0 0 1 .2-1.8c0-.5.2-1 .3-1.4a4.2 4.2 0 0 0-1-1.7 6 6 0 0 0-1.3-.8l-1.3-.7a4.1 4.1 0 0 1-1.3-1.2 2.7 2.7 0 0 1-1.9-.7c-.5-.4-1-.9-1.7-1.3a18.3 18.3 0 0 0-1.5 1.3 8.6 8.6 0 0 1-1.7 1.2c0 .4.2.6.4.6s.3.2.4.5l-.8-.1a1.5 1.5 0 0 0-1 .2 458 458 0 0 1-8.2 9.7 29 29 0 0 0-3.5 5l-1.5 2-1.7 2.3-1 1.2V103l.2-4.6-.2-7.6a11 11 0 0 0-1.2-5.2l.3-4a1 1 0 0 0-1.6-1 1.1 1.1 0 0 0-1.9-1l-1.9 2.6q-2.1 1.5-4 3.2c-3.4-.5-3.9 2.6-3.9 5.3a1 1 0 0 0 0 1.1v1.5l.1 4.1a6.5 6.5 0 0 1-.7 2.3 53.3 53.3 0 0 1 .2 7.6l-.2 4.7-2-2.2-12.6 4.8-1 .2a3.9 3.9 0 0 0-.8.4 2.7 2.7 0 0 0-.8 0 28.6 28.6 0 0 1-1.9-3.5l-1.7-4-1.1-2.8-1.3-2.8-1-3.2-.2-.3c-.3-3.5-2.5-6.3-4.3-9.3l-.5-1.1-1.3 1.6 1 1.8-1-.2v-.2a.8.8 0 0 0-.4-.6.8.8 0 0 0 0-.1l-1 1.6a2 2 0 0 1-2.7.7l-5.3-2.6a6 6 0 0 0-.9-.3l-5 11-.5.3a18.5 18.5 0 0 0-1 3l-.2.5-1.4 3a1.1 1.1 0 0 0 .3 1.4l-.1.6a27.3 27.3 0 0 1-1 2.7 2.3 2.3 0 0 0 0 .8 2.3 2.3 0 0 0 .3.6l-.7 3-.7 2.8-.3 1.6v.1c0 .1 0 0 0 0v.4c-.2 0 0 .1-.2.2s0 .1 0 .2a1.1 1.1 0 0 1 0 .3v.5c0 .1-.2.1 0 .1 0 .2 0 .4-.2.6v.4c0 .1 0 .1 0 0a2 2 0 0 1 0 .3V124.6c.1.1 0 0 0 0v.5c0 .1-.1 0 0 .1v.8a.6.6 0 0 1-.1.2l-.1.5v.1l-.4 1.6q-1 4.2-1.6 8.8l.2 1.4-.7.9 1 .7a.4.4 0 0 1 0 .2v.1c0 .1-.1 0 0 .1v.4s-.1 0 0 0v.2a.4.4 0 0 0 0 .2v.3a1.2 1.2 0 0 1 0 .1v.2c0 .3 0 .5-.2.6h.1v2.1c0 .1 0 0 0 0v.2c0 .2 0 0 0 0v.5c0 .1 0 0 0 0v1.5a13 13 0 0 0 0 2 .1.1 0 0 1 0 .2h-.1a2.6 2.6 0 0 1 0 .7V148.9h-.1a4.6 4.6 0 0 0 0-1 2 2 0 0 0 0-.5 2.1 2.1 0 0 1 0-.3v-.4a2 2 0 0 1 0-.5v-.7a.5.5 0 0 0 0-.1v-.1.9-.2h-.2v.3a2.9 2.9 0 0 0 0 .7 1.4 1.4 0 0 1 0 .3v2.4a.1.1 0 0 1 0 .2.3.3 0 0 0 0 .1v.1a.1.1 0 0 0 .1.1.2.2 0 0 1 0 .2.1.1 0 0 1 0 .1h.1a1.3 1.3 0 0 0 0 .5h-.9v-.4a.2.2 0 0 0 0-.1v-.1a1.5 1.5 0 0 1 0-.5v-.6.3l.1.2c.1 0 0-.2 0-.2v.4a2.9 2.9 0 0 0 .1.3v.1a.7.7 0 0 1 0 .3 1 1 0 0 1 0 .3v.1l.1-.1c.1-.1 0 0 0 0v-.2a.2.2 0 0 1 0 .2c.1 0 0 .2 0 .2a3.4 3.4 0 0 0 .2.8v.1a.7.7 0 0 1 0 .4h.2c-.1 0 0-.2 0-.2v-.1l.1.1c.1 0 0 0 0 .1a3.4 3.4 0 0 1 0-.5s.2 0 0 0 .1 0 0-.2v-.3a4.5 4.5 0 0 0 .9 1.9 2.9 2.9 0 0 0 3 1.1 51.1 51.1 0 0 0 5.8 5.3c.6.5 2 .3 1.9-.8-.7-5.6.5-11.1 1.5-16.6a50.6 50.6 0 0 0 .9-7.6l.1-2.7a25.8 25.8 0 0 0 2.3 4.6c.7.9 2.3.4 2-.8a.9.9 0 0 0 0-.2 84.8 84.8 0 0 1 8.5-3.5l2.3-.7 1 3 .2.4a1.7 1.7 0 0 1 1.5.5l.1.1a131.4 131.4 0 0 1 3.1 15 .5.5 0 0 0 .9.3c1.3-1.4 1.7-3.5 2.3-5.4l2.2-4.8a9.2 9.2 0 0 0 .6-.7 10.7 10.7 0 0 0 1.6-3l.3-.6.4-.5a.4.4 0 0 0-.1-.6 12.8 12.8 0 0 0 .2-1.3l.1-.4v-.3a19.2 19.2 0 0 0 .5-2.2 1.1 1.1 0 0 0-1.4-1.3l-.8-2.3a5.3 5.3 0 0 1-.5-1l-.3-1c1.1-.8 4.8-.5 5.6-1.5a73 73 0 0 1 6.8-3.5c.1 1.2.2 8.4.4 9.5a6.3 6.3 0 0 1-.5.4c-.2.1-.2.3 0 .7l.3.3.5.6v.2a2.7 2.7 0 0 1-.7.3 1.4 1.4 0 0 0 0 1 8.7 8.7 0 0 0 .6.8 4 4 0 0 1 .3.5l.1 1.1a2.4 2.4 0 0 1-.1.2l.1.1c.3 2.5.7 5 .8 7.5l-.2 1a1.2 1.2 0 0 0 .2.9 24 24 0 0 1-.2 3.4l-.6 1c-.7 1.2 1 2.5 1.8 1.5a1.1 1.1 0 0 0 .7-.6l1.2-2-.7 1.6c-.7 1.3 1.3 2.5 2 1.2l3.6-7.3a3.5 3.5 0 0 0 .5 0 8.8 8.8 0 0 0 2.9-4 49 49 0 0 0 1.5-5l.6-2 3-6a9.8 9.8 0 0 0 2.1 1.5 49.7 49.7 0 0 0 9.7 3 11.7 11.7 0 0 0 1.2.4 2.3 2.3 0 0 0 .6 0l2.3.5a.6.6 0 0 0 .2.2 19 19 0 0 0 3.9.5 20.3 20.3 0 0 0 4.5 0l1.8-.3c1.9 0 4-.3 5.3-.5l.2 3a1.4 1.4 0 0 0-.2.4 4.3 4.3 0 0 0 .8 4.4v.1l-.1 1.3c0 1.5-.3 4.3 1 5.4a1.6 1.6 0 0 0 .1.2c.2 1.3.5 2.8 2 2.9a13.6 13.6 0 0 0 3.4-.8l4.5-1.2 5.7-1.4a57.8 57.8 0 0 0 7.2-1.4c2-.5 4-1.3 5.8-2l7.2-1.9c1.3-.3 1-2.4-.3-2.3a24.2 24.2 0 0 0-4.5 1 20.3 20.3 0 0 0 4-1.7 8.8 8.8 0 0 0 1.6-1 23.4 23.4 0 0 1 .9-5.6l.9-3a2.5 2.5 0 0 0-.6-.8 1.5 1.5 0 0 1-1.3-.2 9.5 9.5 0 0 1-1-1l-1.3-1a3 3 0 0 0-1.3-.9 16.6 16.6 0 0 1-3.8 1.5 9 9 0 0 0-3.5 1.8 25.8 25.8 0 0 0-4.2.6l-3.2.8q-1.5.5-3.3.8a6.3 6.3 0 0 1-2.5-.4v-9.4a6.2 6.2 0 0 0 1.8 0 4.4 4.4 0 0 1 2.2.1 2.3 2.3 0 0 1 1.7-.5 2.8 2.8 0 0 0 1.4-.2l.6-.1a.6.6 0 0 0 .3 0h.6a9.4 9.4 0 0 0 3.4-.8l.3-.2c.4 0 .9-.2 1.3-.4l.2-.1a1.1 1.1 0 0 0 2 .2 1 1 0 0 0 1-1l-.1-2c0-.2.2-.3.3-.4l2.1-2.4a3.9 3.9 0 0 0-.1-1.8 6.8 6.8 0 0 0-.8-1.5 2.1 2.1 0 0 1-1.4-.2c0-1.1 0-2.2.2-3.4a1 1 0 0 0-.3-.8 1.2 1.2 0 0 0-1.9-.1v.3a1 1 0 0 0-.3 0 1.2 1.2 0 0 0-1.2-.4l-2.7.7-4.2.8a30.4 30.4 0 0 1-6.2.8c-.2-.3 1.3-6.5 1.2-7v-.3c3.2-1.4 6.3-3.2 9.4-4.7q6-2.7 12.1-5l9.3-3.4a.8.8 0 0 1 .4-1.1 58.1 58.1 0 0 1 6-2.1c.4-.2 1.2-.6 2-.8l.4-1.4a9.8 9.8 0 0 1-1.2.2 6.3 6.3 0 0 1-1.4.1 1.1 1.1 0 0 1-.8-1.8.8.8 0 0 0 .3.3 1.1 1.1 0 0 0 .4.1h.1c-.2 0 0 0 0 0a.8.8 0 0 0 .5 0h.1a1.7 1.7 0 0 0 .3-.1 1.4 1.4 0 0 0 .7-1.2 1 1 0 0 0-.8-1 1 1 0 0 0-1 .6 1 1 0 0 0-.6 1 9.4 9.4 0 0 1-1.5.3c-1.2 0-1.4-1.4-.6-2a11.6 11.6 0 0 1 2-1 1.2 1.2 0 0 1 0-1.4 11 11 0 0 1-1.4.3 1.4 1.4 0 0 1-1.4-.7h.1a3.3 3.3 0 0 0 1.5.1c1 .5 2.2-.7 2-1.8a2 2 0 0 0-1.6-1.3 3.4 3.4 0 0 0-.5 0 96 96 0 0 1 3.3-1.8.9.9 0 0 0 .5-.2l1.8-1 3.7-1.8.7-.4.6-1.5-4.8 1.9zm-150 89l-1.2-1.3a1 1 0 0 0 1-.8l.1-.5a.6.6 0 0 0 .2 0v2.5zm8.5-22.5l-.5-1 .7.1h1.2a13.8 13.8 0 0 0-1.4 1zm3.5-13.3l-4.4.9a5.3 5.3 0 0 1-.8.2 5 5 0 0 0-1 .2l.6-1.7.7-1.6a39.9 39.9 0 0 1 1.6-4.5 30.8 30.8 0 0 1 2.3-4.4l.2-.9a178 178 0 0 1 5 10.6 40.5 40.5 0 0 1-4.2 1.2zm10 10.3l.3-.1a7.8 7.8 0 0 1 .2 1.3zm4.8 18.1q-.9-5.4-2.1-10.7a36.1 36.1 0 0 1 1.4 4v1.8a.5.5 0 0 0 .7.5l.7 2.5a10.1 10.1 0 0 1-.7 2zm22.6-5.8a.8.8 0 0 0-.2-.1l.2-.8a.8.8 0 0 0 .3-.1l.1.3zm14.7-17.5a1 1 0 0 1 .4.3l.6.4a7 7 0 0 1-1-.7zm34.2 16.5a4.4 4.4 0 0 1-.7-2l.6.6a6.2 6.2 0 0 1 .1 1.2zm13.7 1.9a27.8 27.8 0 0 0 3.2-.7c1.6-.4 3-.8 4.2-1.3a2.7 2.7 0 0 1 1 .1l-9.5 2.5c.3-.3.7-.5 1-.6zm6.7-64.2l-.9.2-.4.2v-.1l1.6-.5zm18-4.8a.1.1 0 0 0-.1 0l-.4.1s0 .1 0 0h-.2a.7.7 0 0 0-.1.2c0-.1-.2 0-.2 0h-.2a.7.7 0 0 0 .2-.2l.3-.1 1.4-.4zm6.1 1.7l.3-.1a.1.1 0 0 1 .1 0l-.2.2h-.1l-.2.1c-.2.1 0 0-.1 0h-.1zm1.6-6.2l-5 2.6-3.7 1.9a1 1 0 0 0 0-.7 84.8 84.8 0 0 0 10.2-4.8 1 1 0 0 0 .1.3l-1.5.7zM377.2 90zm1-.2z\"></path>\n    <path d=\"M381.9 88.7c.1 0 0-.2 0 0zm10-16.5a.9.9 0 0 0-1.5 0 1.1 1.1 0 0 0-.1.7.9.9 0 0 0 1.8 0 1 1 0 0 0-.2-.7zm-280.7 99.1a5.2 5.2 0 0 0 1.3-1.1c-.8.5-1.7 1-2.5 1.7l1.3-.6z\"></path>\n    <path d=\"M184.5 76.6l-1 1.4a1 1 0 0 0-1.3-.5l-.4.2a1.1 1.1 0 0 0-.5-1 .8.8 0 0 0-.1-1 .8.8 0 0 0-.4-1 1.6 1.6 0 0 0-1-.3.8.8 0 0 0-.3-.9l2-1.2a1 1 0 0 1 0-.4 3 3 0 0 1 1-1l-3.5 2.4a1.7 1.7 0 0 0-1 .1 1.1 1.1 0 0 0-.8 0 1 1 0 0 0-.7 1l-5 3-.2.1a2 2 0 0 0-.5 0 2 2 0 0 0-1.2 1l-3.3 2.2a26.6 26.6 0 0 0-4.4 3l-1.4.7 1-.8c3.4-2.5 7.1-5 10.3-7.7.6-.6-.2-1.6-1-1.2a94.6 94.6 0 0 0-11 7.4l-10.6 8c-7 5.2-14 10.6-20.4 16.4a1 1 0 0 0-.4.7 17.3 17.3 0 0 0-4.2 3.5v.1c.7 4.8 4.2 8.4 6.4 12.7a110.5 110.5 0 0 1 14.3 3q2.3.6 4.5 1.4a12.5 12.5 0 0 1 4.3 2c2 1.8 1.7 4.7 1 7.2a43.9 43.9 0 0 1-6 5.6l-7.5 3.7-6.4 3.5a2 2 0 0 1 0 .3l-3.5 1.4a68.3 68.3 0 0 0-7.7 3.1.8.8 0 0 0 .3 1.6.8.8 0 0 0 .8 1.1 36.4 36.4 0 0 0 6.5-2.7l.4-.2c-4.9 4.3-10.5 7.7-16 11.3-2.2 1.5-4.5 3-6.7 4.7a.8.8 0 0 1 .2.2 74.2 74.2 0 0 1 11.4-6.5c.9-.4 1.8.7 1 1.3-2 1.9-4.5 3.4-6.3 5.5l.7-.2h.3l.1-.2.4-.1a38.7 38.7 0 0 1 5-2.9 1.3 1.3 0 0 1 1.6.7 2.4 2.4 0 0 0 .2-.2.6.6 0 0 0 .2 0l1.5-.7-1.9 1a.8.8 0 0 1-.3 1l-.3.1a11.7 11.7 0 0 0 1.4-.7l.6-.3c.8-.6 1.6.6 1 1.2 2.7-1.5 5.4-2.9 8.2-4.2a.9.9 0 0 0 0 .6l-.5.3a.5.5 0 0 0 .3 1 62.6 62.6 0 0 0 6.3-2l4.4-2.6.6-.4a9 9 0 0 1 2.3.1.5.5 0 0 0 .7-.5 2.7 2.7 0 0 1 0-.6c-.2.4.4 1 .8.5a9.1 9.1 0 0 1 1.3-1.2 36.4 36.4 0 0 0 6.5-3.5 17.7 17.7 0 0 0 3.2-1.9l1.9-1.4a33.8 33.8 0 0 0 2.8-2l.9-.7a13.9 13.9 0 0 0 2.2-1.7 19 19 0 0 1 2-1.5.5.5 0 0 0 .3-.6l.8-1.4a25.9 25.9 0 0 0 2.8-6.7 21.4 21.4 0 0 0 .6-7.7 10.7 10.7 0 0 0-1.2-4l-1-2.1c-.7-1.1-1.2-2.4-2-3.3a23.8 23.8 0 0 0-5.3-5 33 33 0 0 0-6.7-3.3c-2.3-.9-5.4-1.2-7.3-2.6a1.1 1.1 0 0 1-.3-.4l13.8-9c5.6-3.7 11.5-7.3 17-11.4l3.7-2a2.7 2.7 0 0 0 0-.2 1.9 1.9 0 0 1-1.3-1.6 2 2 0 0 1-.7-1.3.8.8 0 0 0 .3-.1 6.8 6.8 0 0 0 1.4-3.6 1 1 0 0 0 1.5-.3l.1-.8a1 1 0 0 0-1-1l1-2a.9.9 0 0 0-1.6-1zm-36.8 47.9a1.2 1.2 0 0 0-.2.2l-2.8-.8 1.8.3 1.4.2zm-10.2 40.4l1.3-.7a63.7 63.7 0 0 1-1.3.7zm16.3-8.6l-.3.3-.6.2.1-.1zm7.7-27a4 4 0 0 1 .1 3 11.9 11.9 0 0 0-.1-3zm4.6 19.8l-1.3 1-.6.4.4-.5 1.5-1zM147.2 160l-1.1.6h-.3l1.4-.5zm2-15.1a3 3 0 0 1 .4-.2l.3-.2h.3a2.7 2.7 0 0 0 .4-.2h.2a.6.6 0 0 1 .2-.1l-.3.2h-.1c-.2.2-.5.2-.7.3a2.8 2.8 0 0 1-.4.2l-.5.2zm13.5-16.6l-.2.9a6.5 6.5 0 0 0-1.3-1.1zm-4.8-2a9.2 9.2 0 0 1 .7 1.4 9.2 9.2 0 0 0-1-1.1 1.7 1.7 0 0 0 .3-.4zm-.9 11.2l1-1.4-.8 1.2-.2.2zm-1.6-10a13 13 0 0 1 .4 1.4 6.6 6.6 0 0 0-1.5-1.4 8.6 8.6 0 0 0 1-.1zm-2.8-4.3a5 5 0 0 1 .5.4l-1.5-.6zm24-39a1.4 1.4 0 0 1-1.4-.8h.1a1.1 1.1 0 0 0 .3-.6.9.9 0 0 0 0-.3.7.7 0 0 0 .2-.2.9.9 0 0 0 0-1 1 1 0 0 0 .7-.3 1.1 1.1 0 0 0 .2-.4l.5-.2a2.3 2.3 0 0 0-.6 1 .7.7 0 0 0 .7.9 1 1 0 0 0 .1 1 1 1 0 0 0 1.2.2 1.4 1.4 0 0 0 .3-.1l.2-.1.3-.2a1 1 0 0 0 .5.5 18.8 18.8 0 0 1-3.2.5zm4.5-4a2.4 2.4 0 0 1-.1.3v.1a1.1 1.1 0 0 0 0 .2 1 1 0 0 0-.2-.4l.5-.4a.9.9 0 0 0-.2.2zm1.3-.5a1 1 0 0 0-.3.1 1 1 0 0 0-.5 0l1-.5zm4.8-6.8l-.1-.1a1 1 0 0 0-.8-.5 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .5.8v.1a1 1 0 1 0 1.4-1.3z\"></path>\n  </svg>\n);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport raw from \"raw.macro\";\n\nimport Editor from \"@monaco-editor/react\";\nimport { editor } from \"monaco-editor\";\n\nimport Board from \"./Board\";\nimport * as engine from \"./engine\";\nimport * as code from \"./code\";\nimport { tutorials } from \"./tutorial\";\nimport { Logo } from \"./ui\";\n\nimport \"@primer/css/dist/primer.css\";\nimport \"./index.css\";\n\ninterface AppState {\n  code: string;\n  tutorial: number;\n  running?: boolean;\n  cancelled?: boolean;\n  frame: engine.Frame;\n  error?: Error;\n}\n\nconst basicSnake = raw(\"./examples/basic.js\");\nconst placeholder = raw(\"./examples/placeholder.js\");\n\nclass App extends React.Component<{}, AppState> {\n  initial = localStorage.getItem(\"code\") || placeholder;\n  editor: editor.IStandaloneCodeEditor | undefined;\n  state: AppState = {\n    tutorial: parseInt(localStorage.getItem(\"step\") || \"0\"),\n    code: this.initial,\n    frame: engine.initialFrame,\n  };\n\n  componentDidMount = () => {\n    setTimeout(this.handleStart, 1000);\n  };\n\n  cancelled = () => !!this.state.cancelled;\n\n  handleInit = () => {\n    if (!this.editor) {\n      return;\n    }\n    this.editor.onDidChangeModelContent(() => {\n      this.handleCodeChange(this.editor!.getValue());\n    });\n  };\n\n  handleSetTutorial = (change: number) => {\n    const tutorial = this.state.tutorial + change;\n    this.setState({ tutorial });\n    localStorage.setItem(\"step\", tutorial.toString());\n  };\n  handleNext = () => this.handleSetTutorial(1);\n  handlePrev = () => this.handleSetTutorial(-1);\n\n  handleCodeChange = (code: string) => {\n    localStorage.setItem(\"code\", code);\n    this.setState({ code });\n  };\n\n  handleReset = () => {\n    this.setState({\n      cancelled: true,\n      running: false,\n      frame: engine.initialFrame,\n    });\n  };\n\n  handleStop = () => {\n    this.setState({ cancelled: true, running: false });\n  };\n\n  handleStart = () => {\n    if (this.state.running) {\n      return;\n    }\n    this.setState({ running: true });\n    this.run();\n  };\n\n  run = background(async () => {\n    this.setState({ cancelled: false });\n    try {\n      const js = this.state.code === placeholder ? basicSnake : this.state.code;\n      const snake = code.evaluate(js);\n      await engine.run(snake, this, (frame) => {\n        this.setState({ frame, error: undefined });\n      });\n      this.setState({ running: false });\n    } catch (error) {\n      console.log(error);\n      this.setState({ error, running: false });\n    }\n  });\n\n  render() {\n    const { tutorial, error, code, running, frame } = this.state;\n    const Tutorial = tutorials[tutorial];\n    return (\n      <>\n        <header className=\"Header bg-gray-dark\">\n          <div className=\"Header-item\">\n            <a href=\"https://battlesnake.com\" target=\"_blank\">\n              <Logo />\n            </a>\n          </div>\n          <div className=\"Header-item Header-item--full f3 text-mono\">\n            Learn to Battlesnake!\n          </div>\n          <div className=\"Header-item\">\n            <a\n              target=\"_blank\"\n              href=\"https://github.com/colinjfw/battlesnake-learn\"\n            >\n              Contribute on GitHub\n            </a>\n          </div>\n        </header>\n        <main className=\"height-page d-flex flex-content-stretch\">\n          <div className=\"flex-1 bg-gray-light height-page d-flex flex-column\">\n            <Tutorial\n              code={code}\n              next={\n                tutorial < tutorials.length - 1 ? this.handleNext : undefined\n              }\n              prev={tutorial > 0 ? this.handlePrev : undefined}\n            />\n          </div>\n          <div className=\"flex-1 bg-vs-dark height-page overflow-hidden\">\n            <Editor\n              height=\"100%\"\n              value={this.initial}\n              editorDidMount={(_, ref) => {\n                this.editor = ref;\n                this.handleInit();\n              }}\n              language=\"javascript\"\n              theme=\"dark\"\n              options={{\n                minimap: { enabled: false },\n                scrollbar: { vertical: \"hidden\", verticalScrollbarSize: 0 },\n              }}\n            />\n          </div>\n          <div className=\"flex-1 bg-vs-dark height-page border-left\">\n            <div className=\"p-2 height-page\">\n              <div className=\"text-center text-red\" style={{ height: \"25px\" }}>\n                {error && error.message}\n              </div>\n              <Board\n                food={frame.food}\n                columns={frame.game.width}\n                rows={frame.game.height}\n                snakes={[frame.snake]}\n              />\n              <div className=\"BtnGroup d-flex flex-justify-center mt-3\">\n                {!running && (\n                  <button\n                    className=\"btn BtnGroup-item\"\n                    onClick={this.handleStart}\n                  >\n                    Play\n                  </button>\n                )}\n                {running && (\n                  <button\n                    className=\"btn BtnGroup-item\"\n                    onClick={this.handleStop}\n                  >\n                    Pause\n                  </button>\n                )}\n                <button\n                  className=\"btn BtnGroup-item\"\n                  onClick={this.handleReset}\n                >\n                  Reset\n                </button>\n              </div>\n            </div>\n          </div>\n        </main>\n      </>\n    );\n  }\n}\n\nfunction background(fn: () => void) {\n  return () => setTimeout(fn, 0);\n}\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n","export interface Code {\n  move: (req: any) => { move: string };\n  start: (req: any) => { color: string };\n}\n\n/**\n * Code evaluates code and turns it into two functions that can be called.\n */\nexport function evaluate(code: string): Code {\n  const callable = new Function(\n    `${code};\\n return { move: move, start: start }`\n  )();\n  return callable;\n}\n"],"sourceRoot":""}